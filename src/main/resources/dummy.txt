
 
CREATE DATABASE liquorStore;




CREATE TABLE admin
(id INT AUTO_INCREMENT PRIMARY KEY,
username VARCHAR(50) NOT NULL,
password VARCHAR(50) NOT NULL,
first VARCHAR(50) NOT NULL,
last VARCHAR(50) NOT NULL,
role int(5) NOT NULL,
UNIQUE (username))
ENGINE = InnoDB;


CREATE TABLE customer
(id INT AUTO_INCREMENT PRIMARY KEY,
first VARCHAR(50) NOT NULL,
last VARCHAR(50) NOT NULL,
username VARCHAR(50) NOT NULL,
password VARCHAR(50) NOT NULL,
address VARCHAR(50) NOT NULL,
birthDate DATETIME(50) NOT NULL,
UNIQUE (username),
CONSTRAINT customer_fk_1 FOREIGN KEY (address) REFERENCES address(id) ON DELETE CASCADE)
ENGINE = InnoDB;


CREATE TABLE address
(id INT AUTO_INCREMENT PRIMARY KEY,
customerId int(10) NOT NULL,
streetNumber VARCHAR(50) NOT NULL,
streetName VARCHAR(50) NOT NULL,
aptNumber VARCHAR(50) NOT NULL,
city VARCHAR(50) NOT NULL,
state VARCHAR(50) NOT NULL,
zipCode VARCHAR(50) NOT NULL,
CONSTRAINT address_fk_1 FOREIGN KEY (customerId) REFERENCES customer(id) ON DELETE CASCADE)
ENGINE = InnoDB;


CREATE TABLE coreProduct
(id INT AUTO_INCREMENT PRIMARY KEY,
name VARCHAR(50) NOT NULL,
tags VARCHAR(100) NOT NULL,
type ENUM('BEER', 'WINE', 'SPIRITS'),
subtype VARCHAR(50) NOT NULL,
description VARCHAR(100) NOT NULL,
CONSTRAINT coreProduct_fk_1 FOREIGN KEY (tags) REFERENCES productTags(tags) ON DELETE CASCADE)
ENGINE = InnoDB;





CREATE TABLE tags
(id INT AUTO_INCREMENT PRIMARY KEY,
name VARCHAR(50) NOT NULL)
ENGINE = InnoDB;


CREATE TABLE productTags
(coreProductId int(10) NOT NULL,
tags int(10) NOT NULL,
PRIMARY KEY (productId, tags),
CONSTRAINT productTags_fk_1 FOREIGN KEY (coreProductId) REFERENCES coreProduct(id) ON DELETE CASCADE,
CONSTRAINT productTags_fk_2 FOREIGN KEY (tags) REFERENCES tags(id) ON DELETE CASCADE)





CREATE TABLE product
(id INT AUTO_INCREMENT PRIMARY KEY,
coreProductId int(10) NOT NULL,
baseUnit VARCHAR(50) NOT NULL,
quantity INT(10) NOT NULL,
inventory INT(10) NOT NULL,
CONSTRAINT product_fk_1 FOREIGN KEY (coreProductId) REFERENCES coreProduct(id) ON DELETE CASCADE)
ENGINE = InnoDB;


CREATE TABLE order
(id INT AUTO_INCREMENT PRIMARY KEY,
customerId INT(10) NOT NULL,
date DATE(10) NOT NULL,
total DECIMAL(10) NOT NULL,
orderDetail INT(10) NOT NULL,
CONSTRAINT order_fk_1FOREIGN KEY (customerId) REFERENCES customer(id) ON DELETE CASCADE)
ENGINE = InnoDB;


CREATE TABLE orderDetail
(orderId int(10) NOT NULL,
productId int(10) NOT NULL,
quantity int(10) NOT NULL,
unitPrice DECIMAL(50) NOT NULL,
PRIMARY KEY (orderId, productId),
CONSTRAINT orderDetail_fk_1 FOREIGN KEY (orderId) REFERENCES order(id) ON DELETE CASCADE,
CONSTRAINT orderDetail_fk_1 FOREIGN KEY (productId) REFERENCES product(id) ON DELETE CASCADE)
ENGINE = InnoDB;


CREATE TABLE sales
(id INT AUTO_INCREMENT PRIMARY KEY,
productId INT(10) NOT NULL,
year YEAR(4) NOT NULL,
month ENUM('Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'),
sales DECIMAL(50) NOT NULL)
ENGINE = InnoDB;


